(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(t){if(t.ep)return;t.ep=!0;const n=r(t);fetch(t.href,n)}})();const i=document.getElementById("console"),p=document.getElementById("player-tag");let u=-1,l,f=!1,y=["x","o"],d=[];for(let e=1;e<=9;e++)d.push(document.getElementById(e));const m="ttt-multiplayer-f664.onrender.com",g=`wss://${m}`,c=new WebSocket(g);c.onerror=e=>{i.textContent="Could not connect to server"};c.onopen=e=>{console.log("Connected to server")};c.onmessage=e=>{const o=JSON.parse(e.data);switch(o.type){case"init":l=o.data,p.textContent=`You are Player ${l} (${y[l-1]})`;break;case"state":const r=o.data;f=r.active,h(r.board),i.textContent=r.msg,u=r.currentPlayer;break;case"msg":console.log(o.data),i.textContent=o.data;break}};c.onclose=e=>{console.log("Connection closed")};function h(e){d.forEach((o,r)=>{const s=o.childNodes[0];s.textContent=e[r],(s.textContent=="x"||s.textContent=="o")&&(s.style.opacity=1)})}d.forEach(e=>{e.onclick=()=>{u!=l||!f||(console.log(e.id),c.send(e.id),e.childNodes[0].style.opacity=1)}});
